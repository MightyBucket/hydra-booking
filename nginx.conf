server {
    listen 80;

    server_name _;

    # Optional: redirect root to /hydra
    location = / {
        return 301 /hydra/;
    }

    # Reverse proxy for /hydra path
    location /hydra/ {
        proxy_pass http://app:5000/;  # note the trailing slash at the end!
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;

        # If your app needs to know it's under /hydra:
        #proxy_set_header X-Forwarded-Prefix /hydra;
    }
}
